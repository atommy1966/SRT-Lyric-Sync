# SRT Lyric Sync (歌词同步工具)

[English](./README.md) | [Español](./README.es.md) | [日本語](./README.ja.md)

上传带有音频的视频或音频文件，并提供 SRT、VTT、LRC 格式的歌词文件或完整的歌词文本，即可使用 AI 自动生成同步的 SRT、VTT 或 LRC 字幕文件。

![SRT Lyric Sync - 主界面](https://raw.githubusercontent.com/atommy1966/SRT-Lyric-Sync-assets/main/2025-09-12%2014.48.26.png)
![SRT Lyric Sync - 编辑器视图](https://raw.githubusercontent.com/atommy1966/SRT-Lyric-Sync-assets/main/2025-09-13%2021.17.22.png)

## ✨ 主要功能

*   **AI 驱动的转录与同步**：
    *   **一键转录**：没有歌词？让 AI 直接在编辑器中为您转录音频，并一步生成同步字幕。
    *   **自动同步**：如果您已有歌词，只需粘贴进来，AI 即可在数秒内创建完美同步的字幕文件。
*   **高精度 AI 微调**：一键微调生成的时间码。AI 会分析人声衰减和分句，以实现专业级精度。
*   **高级交互式编辑器**：
    *   **一键设置时间戳**：点击任意时间字段旁边的目标图标，即可立即将其设置为视频当前播放位置的时间。
    *   **拖放排序**：轻松拖动字幕行以重新排序。
    *   **强大的右键菜单**：快速插入新行、与下一行合并、删除或上下移动行。
    *   **即时拆分行**：将光标置于文本中并点击“拆分行”按钮，即可将长行立即拆分为两行，并自动计算时间码。
    *   **键盘快捷功能**：在时间字段中使用方向键进行精确的 100 毫秒调整（按住 Shift 键可进行 1 秒调整）。在非输入状态下，使用空格键播放/暂停视频。
    *   **撤销/重做历史记录**：再也不会丢失任何编辑。轻松地在您的更改历史中前进和后退。
*   **全局时间控制**：
    *   **全局偏移滑块**：一次性将所有时间戳向前或向后移动，以完美对齐整个字幕轨道。
    *   **人声衰减助手**：为每行末尾统一添加一个延迟，以更好地匹配歌手声音的自然淡出。
*   **灵活的导入/导出与工作流**：
    *   **实时视频预览**：您的编辑会立即反映在自定义视频播放器上。字幕列表会根据当前播放的歌词行自动滚动。
    *   **多格式支持**：支持从 `.txt`、`.srt`、`.vtt` 和 `.lrc` 文件导入。通过简化的下载菜单，将您的作品导出为 SRT、VTT 或 LRC 格式。
    *   **草稿自动保存与恢复**：您的进度会自动保存在浏览器中。如果您离开后再次返回，应用将提示您恢复未保存的草稿。

## 🚀 如何使用

1.  **上传媒体**：拖放或选择您的视频/音频文件。
2.  **提供歌词**：您有三种选择：
    *   **转录（推荐）**：点击 **“转录”**，让 AI 自动一步生成歌词和时间码。
    *   **粘贴**：将歌词直接粘贴到文本区域。
    *   **导入**：点击 **“导入”**，从 `.txt` 文件或现有的字幕文件（`.srt`、`.vtt`、`.lrc`）加载歌词。
3.  **生成/微调**：
    *   如果您粘贴或导入了歌词，请点击 **“生成”** 来创建初始的时间码。
    *   随时点击 **“微调”**，使用 AI 提高当前字幕的时间码精度。
4.  **编辑**：使用强大的交互式编辑器进行任何最终调整。
5.  **下载**：以您期望的格式（SRT、VTT 或 LRC）导出同步后的字幕。

---

## 🌐 在线演示

[在此处试用 SRT Lyric Sync](https://srt-lyric-sync-369376059789.us-west1.run.app/)

**注意：** 媒体文件的最大上传大小为 15MB。

## 💻 本地开发

本应用设计为从环境变量（`process.env.API_KEY`）获取 Gemini API 密钥，这在部署到 Google AI Studio 时会自动处理。

**仅限本地开发时**，您需要手动提供密钥。

### 1. 设置您的 API 密钥（本地解决方案）
由于这是一个没有构建过程的简单静态项目，您必须临时编辑 `services/geminiService.ts` 文件以插入您的密钥。

- **打开文件：** `services/geminiService.ts`
- **找到这一行：** `const API_KEY = process.env.API_KEY;`
- **替换为您的密钥：** `const API_KEY = "在此处填入您的GEMINI_API密钥";`

⚠️ **重要提示：** 这仅用于本地测试。**请勿提交此更改**或将其推送到公共仓库，因为这会暴露您的 API 密钥。

### 2. 运行本地服务器
本项目不需要复杂的构建过程。
- 在项目的根目录中打开一个终端。
- 使用一个简单的本地服务器。例如：
  ```bash
  # 如果您有 Python 3
  python -m http.server

  # 如果您有 Node.js 和 serve
  npx serve .
  ```

### 3. 在浏览器中打开
- 访问您终端中显示的本地 URL（例如 `http://localhost:8000`）。

---

由 Google Gemini 强力驱动。